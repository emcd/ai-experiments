id: 'Read + Analyze'
# TODO: Provide replacement or supplemental instructions.
# TODO: Drop language selection; detect language in function
#       and set default instructions accordingly.
template: |
  Please analyze the file at `${variables.path}` via a function that employs an
  AI agent. The AI should be instructed to do the following:
  % if 'Python' == variables.language:
  * Summarize classes, functions, and module attributes.
  * Note any contradictions between documentations (docstrings, inline
    comments) and the actual mechanics of their corresponding entities.
  % else:
  * Summarize file/module-level entities, including constructs, functions, and
    global variables. Do likewise for the members of constructs.
  * Note any contradictions between comments and the actual mechanics of their
    corresponding entities.
  % endif
  * As part of each summary, note any potential bugs, missing cases, or
    insufficient error handling. Likewise, note todo, hack, and fixme comments.

  After the analysis is complete, please recapitulate it, merging the summaries
  of any structural entities which crossed chunk boundaries and accounting for
  any entities which were referenced before they were defined. Also, please
  provide a high-level summary of the file, including its purpose and a list of
  potential improvements.
# TODO: requires-functions: [ 'read' ]
variables:
  - id: 'language'
    label: 'Language'
  - id: 'path'
    label: 'Path'
